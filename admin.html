<!doctype html><html lang="id"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Lezza Murlog — Admin</title><style>@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600&display=swap');*{box-sizing:border-box}body{margin:0;font-family:Orbitron,monospace;background:radial-gradient(circle at top,#1a001f,#000);color:#fff;min-height:100vh;overflow-x:hidden}header{position:fixed;top:0;left:0;width:100%;height:70px;display:flex;align-items:center;gap:12px;padding:10px 20px;background:rgba(20,0,35,.8);backdrop-filter:blur(6px);border-bottom:1px solid rgba(255,255,255,.06);z-index:20}header img{width:44px;height:44px;border-radius:50%}header h1{margin:0;font-size:1.05rem;color:#b74bff;letter-spacing:2px}.hdr-right{margin-left:auto;display:flex;gap:10px}.hdr-right button{background:#b74bff;color:#fff;border:0;padding:8px 12px;border-radius:18px;cursor:pointer}main{padding:100px 20px 60px;max-width:1100px;margin:0 auto;display:flex;flex-wrap:wrap;gap:30px;justify-content:center}.card{width:360px;background:rgba(40,0,60,.38);border:1px solid rgba(183,75,255,.25);border-radius:16px;padding:18px;box-shadow:0 6px 24px rgba(183,75,255,.08)}.card h2{margin:0 0 10px;color:#b74bff;font-size:1.05rem}.input,textarea,select{width:100%;padding:10px 12px;border-radius:14px;border:1px solid rgba(183,75,255,.18);background:transparent;color:#fff;margin:8px 0;font-size:14px}textarea{min-height:80px} .btn{display:inline-block;width:100%;text-align:center;padding:10px;border-radius:14px;background:#fff;color:#b74bff;font-weight:700;border:0;cursor:pointer}.btn:hover{background:#b74bff;color:#fff}.list{width:100%;margin-top:6px;display:flex;flex-direction:column;gap:10px}.row{display:flex;align-items:center;justify-content:space-between;background:rgba(255,255,255,.03);padding:10px;border-radius:12px}.thumb{width:90px;height:60px;object-fit:cover;border-radius:8px}@media(max-width:760px){main{padding:100px 12px 40px}.card{width:100%}}</style></head><body><header><div style="display:flex;align-items:center;gap:10px"><img src="logo.png" alt="logo"/><h1>Lezza Murlog</h1></div><div class="hdr-right"><button onclick="location.href='desain.html'">Lihat Desain</button><button id="lo">Logout</button></div></header><main><div class="card" id="uCard"><h2>Tambah Akun (Member/PT)</h2><input id="ux" class="input" placeholder="Username"/><input id="up" class="input" type="password" placeholder="Password"/><select id="ut" class="input"><option value="member">Member</option><option value="PT">PT</option></select><select id="ud" class="input"><option value="7">1 Minggu</option><option value="30">1 Bulan</option><option value="permanent">Permanen</option></select><button class="btn" id="uAdd">Tambah Akun</button><div style="margin-top:12px"><strong style="color:#b74bff">Daftar Akun</strong><div class="list" id="uList"></div></div></div><div class="card" id="dCard"><h2>Tambah Desain</h2><input id="dn" class="input" placeholder="Nama Desain (wajib)"/><textarea id="dd" class="input" placeholder="Penjelasan singkat (opsional)"></textarea><input id="dl" class="input" placeholder="Link desain (tujuan klik) — opsional"/><select id="da" class="input"><option value="All">All</option><option value="PT">PT Only</option></select><input id="df" class="input" type="file" accept="image/*"/><small style="color:#cfc7e6;display:block;margin-top:8px">Jika upload ada → file diprioritaskan. Jika kosong, link gambar dipakai.</small><input id="di" class="input" placeholder="Link gambar (opsional)"/><button class="btn" id="dAdd">Simpan Desain</button><div style="margin-top:12px"><strong style="color:#b74bff">Desain Tersimpan</strong><div class="list" id="dList"></div></div></div></main><script>(function(){const $lo=document.getElementById('lo');$lo.addEventListener('click',()=>{localStorage.removeItem('loggedUser');location.href='index.html'});function _now(){return Date.now()}function h(v){return v?String(v):''}function rJSON(k){try{return JSON.parse(localStorage.getItem(k)||'[]')}catch(e){return[]}}function sJSON(k,v){localStorage.setItem(k,JSON.stringify(v))}function ensure(u){if(!u) return'';return/^https?:\/\//i.test(u)?u:'https://'+u}function readB(f){return new Promise((res,rej)=>{const r=new FileReader();r.onload=e=>res(e.target.result);r.onerror=rej;r.readAsDataURL(f)})}function authCheck(){const me=JSON.parse(localStorage.getItem('loggedUser')||'null');if(!me|| (me.username!=='AdMinHaMA00ZQz' && me.type!=='admin')){alert('Akses admin.');location.href='index.html';return false}return true}function renderUsers(){let arr=rJSON('users');const now=_now();arr=arr.filter(u=>!u.expireAt||now<u.expireAt);sJSON('users',arr);const wrap=document.getElementById('uList');if(!arr.length){wrap.innerHTML='<small style=\"color:#cfc7e6\">Belum ada akun.</small>';return}wrap.innerHTML='';arr.forEach(u=>{const div=document.createElement('div');div.className='row';const status=u.expireAt?('Expire: '+new Date(u.expireAt).toLocaleDateString()):'Permanen';div.innerHTML=`<div style=\"text-align:left\"><strong>${u.username}</strong><div style=\"color:#cfc7e6;font-size:13px\">${u.type} — ${status}</div></div><div><button data-u=\"${u.username}\">Hapus</button></div>`;div.querySelector('button').addEventListener('click',()=>{if(!confirm('Hapus '+u.username+'?'))return;let a=rJSON('users');a=a.filter(x=>x.username!==u.username);sJSON('users',a);renderUsers()});wrap.appendChild(div)})}function addUser(){const name=document.getElementById('ux').value.trim(),pwd=document.getElementById('up').value.trim(),tp=document.getElementById('ut').value,d=document.getElementById('ud').value;if(!name||!pwd)return alert('Isi username & password!');let arr=rJSON('users');if(arr.find(x=>x.username===name))return alert('Username sudah ada');let ex=null;if(d!=='permanent'){ex=_now()+Number(d)*24*60*60*1000}arr.push({username:name,password:pwd,type:tp,expireAt:ex});sJSON('users',arr);document.getElementById('ux').value='';document.getElementById('up').value='';alert('Akun dibuat');renderUsers()}function renderDesigns(){let arr=rJSON('designs');const wrap=document.getElementById('dList');if(!arr.length){wrap.innerHTML='<small style=\"color:#cfc7e6\">Belum ada desain.</small>';return}wrap.innerHTML='';arr.slice().reverse().forEach(d=>{const div=document.createElement('div');div.className='row';const thumb=d.image?`<img src=\"${d.image}\" class=\"thumb\"/>`:`<div style=\"width:90px;height:60px;border-radius:8px;background:rgba(255,255,255,0.02);display:flex;align-items:center;justify-content:center;color:#cfc7e6\">No</div>`;const meta=`<div style=\"text-align:left\"><strong>${(d.name||'No')}</strong><div style=\"color:#cfc7e6;font-size:13px\">${(d.desc||'')}</div><div style=\"color:#b74bff;font-size:12px\">Akses: ${d.access||'All'}</div></div>`;div.innerHTML=thumb+meta+`<div><button data-id=\"${d.id}\">Hapus</button></div>`;div.querySelector('button').addEventListener('click',()=>{if(!confirm('Hapus desain ini?'))return;let a=rJSON('designs');a=a.filter(x=>x.id!==d.id);sJSON('designs',a);renderDesigns()});wrap.appendChild(div)})}async function addDesign(){const name=document.getElementById('dn').value.trim();const desc=document.getElementById('dd').value.trim();let link=document.getElementById('dl').value.trim();const access=document.getElementById('da').value;const file=document.getElementById('df').files[0];let iml=document.getElementById('di').value.trim();if(!name)return alert('Nama desain wajib');if(link&&!/^https?:\/\//i.test(link))link='https://'+link;let img='';if(file){try{img=await readB(file)}catch(e){return alert('Gagal baca file')} }else if(iml){img=ensure(iml)}const arr=rJSON('designs');arr.push({id:'d_'+Math.random().toString(36).slice(2,9),name,desc,link,access,image:img,createdAt:_now()});sJSON('designs',arr);document.getElementById('dn').value='';document.getElementById('dd').value='';document.getElementById('dl').value='';document.getElementById('df').value='';document.getElementById('di').value='';alert('Desain tersimpan');renderDesigns()}document.getElementById('uAdd').addEventListener('click',addUser);document.getElementById('dAdd').addEventListener('click',addDesign);window.addEventListener('DOMContentLoaded',()=>{if(!authCheck())return;renderUsers();renderDesigns()})})();</script></body></html>
